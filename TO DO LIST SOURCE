#include <iostream>
#include <fstream>
#include <vector>
#include <string>

using namespace std;

const string FILE_NAME = "tasks.txt";


vector<string> loadTask()

{
   vector<string> tasks;
   ifstream file (FILE_NAME);
   string line;

   while (getline(file, line))
   {
       if (!line.empty())
       {
           tasks.push_back(line);
       }
   }
    file.close();
    return tasks;
}
void saveTask(const vector<string>&tasks)// save task
{
    ofstream file(FILE_NAME);
    for (const string &task : tasks)
    {
     file<<task<<endl;
    }
    file.close();
}
void DisplayTasks(const vector<string>& tasks)

{
    if (tasks.empty())
        {
            cout<<"\n No task Found.\n";
            return;

        }

        cout<<"\n Your To Do List ;\n";
        for (size_t i=0 ;i<tasks.size();i++)
        {
            cout<<i+1<<". "<<tasks[i]<<endl;

        }
}
void addTask(vector<string>&tasks){
    cout<<"\n Enter the new task:";
    string task;
    getline(cin,task);
    if (task.empty()){
        cout<<"Cannot add an empty task.\n";
        return ;
    }
    tasks.push_back (task);
    saveTask(tasks);
    cout<<"Task added successfully.\n";
}
void RemoveTasks(vector<string>& tasks){
if  (tasks.empty()){
cout<<"\n No tasks to delete.\n";
 return;
}
 DisplayTasks(tasks);
 cout<<"\nEnter the number of the task to delete.\n";
  int index;
  cin>>index;
  cin.ignore();
  if (index<1 || index >static_cast<int>(tasks.size())){
      return;

  }

  tasks.erase(tasks.begin()+index-1);
  saveTask(tasks);
  cout<<"Task deleted successfully.\n";
}

void displayMenu(){
cout<<"\n--- To-Do List Manager ---\n";
cout<<"1.View Task\n";
cout<<"2.Add Task\n";
cout<<"3.Delete Task\n";
cout<<"4.Exit\n";
cout<< "Choose an option : ";

}
int main()
{
vector<string> tasks=loadTask();
while(true)
{
    displayMenu();
    int Choice;
    cin>>Choice;
    cin.ignore();

   switch(Choice)

   {
   case 1:
       DisplayTasks(tasks);
       break;

   case 2:
    addTask(tasks);
    break;
   case 3:
    RemoveTasks(tasks);
    break;
   case 4:
    cout<<"\nGoodbye !\n";
    return 0;
   default:

    cout<<"Invalid choice. please try again.\n";

   }


}

}




